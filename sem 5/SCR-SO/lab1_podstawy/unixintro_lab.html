<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Unix/Linux - cwiczenia wprowadzajace</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2">
<meta http-equiv="Refresh" content="3600">
<script type="text/javascript" src="http://ff.kis.v2.scr.kaspersky-labs.com/1C15FB7F-4483-384F-882D-5D87625C668F/main.js" charset="UTF-8"></script></head>

<body>
<h1> Zapoznanie siê z systemem Unix </h1>

<ol>


<li> System plików Unixa i polecenia na katalogach:

<pre>
  cd
  ls
  ls -l
  ls -a
  ls -1
  man ls
  mkdir podkatalog
  ls -l
  cd podkatalog
  cd ..
  rmdir podkatalog
  cd /
  ls -l
  cd /etc
  ls
  ls -ltr
  ls -l *.conf
  ls -l *.?
  ls -ld *.?
</pre>
<p/>
</li>


<li> Operacje na plikach:

<pre>
  cd $HOME
  touch pusty
  cp pusty drugi
  mv drugi drugipusty
  ls -l
  rm pusty drugipusty
  cat /etc/termcap

  less /etc/termcap
   i polecenia wewnêtrzne programu less:
     SPACE              - pe³ny ekran do przodu
     b                  - pe³ny ekran do ty³u
     j                  - wiersz w dó³
     k                  - wiersz w górê
     G                  - na koniec pliku
     g                  - na pocz±tek pliku
     h                  - pomoc: sumaryczne zestawienie poleceñ
     /string            - przeszukiwanie do przodu
     n                  - przeszukiwanie dalej
     ?string            - przeszukiwanie do ty³u
     N                  - przeszukiwanie dalej w drug± stronê
  ls -l /etc | less
  man less
</pre>
<p/>
</li>


<li> Prawa dostêpu do plików - pierwsze kroki:

<pre>
  cd $HOME
  echo proba > probny_plik
  chmod -r probny_plik
  ls -l probny_plik
  cat probny_plik
  chmod u+r probny_plik
  ls -l probny_plik
  cat probny_plik
  chmod go-rwx probny_plik
  ls -l probny_plik
</pre>
<p/>
</li>


<li> Operacje na procesach:

<pre>
  ps
  ps -e
  ps -ef
  ps -ef | less
  ps -el
  man ps
  top
</pre>
<p/>
</li>


<li> Kasowanie procesów:

<pre>
  kill pid
  kill -9 pid
  kill -9 -1              # uwaga - to jest polecenie samobójcze
</pre>
<p/>
</li>


<li> Uzyskiwanie informacji o u¿ytkownikach w³±czonych do systemu:

<pre>
  who
  finger
</pre>
<p/>
</li>


<li> Uzyskiwanie informacji o historii wlaczen do systemu:

<pre>
  last
  last | less
</pre>
<p/>
</li>


<li> Uzyskiwanie informacji o istniej±cych kontach u¿ytkowników:

<pre>
  cat /etc/passwd                # plik kont
  niscat passwd.org_dir          # baza danych kont - mo¿e nie istnieæ
  ldaplist passwd                # inna baza danych - te¿ mo¿e nie istnieæ
</pre>
<p/>
</li>


<li> Proste skrypty<br/>

Utwórz plik z poleceniami demonstruj±cymi podstawowe operacje na
plikach: tworzenie pliku i katalogu, zmienianie nazwy, praw dostêpu,
linkowanie, kasowanie pliku, itp.  Uruchamiaj plik jako skrypt, czyli:
<pre>
sh nazwa-pliku
</pre>
Wypróbuj opcjê ¶ledzenia wykonania poleceñ w pliku (set -x).
<p/>
</li>


<li> Dalsze æwiczenia ze skryptami<br/>

Zmodyfikuj napisany przyk³adowy skrypt tak by wykonywa³ operacje na
swoich argumentach: $1, $2, $3, ...

Je¶li skrypt wykonuje operacje na plikach, to spróbuj przerobiæ go
tak, ¿eby dla ka¿dego argumentu zadawa³ pytanie (poleceniem echo), czy
wykonaæ dan± operacjê czy nie.  Nastêpnie wywo³aj skrypt z argumentem
w postaci *.c i sprawd¼ czy poprawnie dzia³a na wszystkich plikach
pasuj±cych do napisanego wyra¿enia.
<p/>
</li>


<li> Program find<br/>

Program find s³u¿y do &ldquo;znajdowania&rdquo; na dysku komputera plików
spe³niaj±cych okre¶lone warunki.  Program nie ma interfejsu graficznego,
lecz jêzyk w jakim mo¿na te warunki okre¶laæ jest niezwykle bogaty i mocny.
Warto nauczyæ siê pos³ugiwaæ programem find przynajmniej w minimalnym stopniu.

Spróbuj pojedynczym wywo³aniem find znale¼æ w katalogu /etc: pliki o rozmiarze
do 1kB utworzone w ci±gu ostatnich 3 dni, oraz pliki nie wiêksze ni¿ 250 kB,
utworzone nie mniej ni¿ miesi±c, ale nie wiêcej ni¿ trzy miesi±ce temu (dla
uproszczenia: 30 i 90 dni temu).

WSKAZÓWKA: zacznij od wyszukiwania plików z pojedynczymi kryteriami
wyszukiwania, upewnij siê, ¿e dobrze je rozumiesz i stosujesz, oraz uzyskujesz  
prawid³owe wyniki.  Nastêpnie po³±cz kryteria wyszukiwania.  W bardziej
zaawansowanych przypadkach mog± byæ do tego przydatne operatory logiczne -a i
-o jak równie¿ nawiasy \( \).
<p/>
</li>


<li>Program tar<br/>

Zapoznaj siê z programem tar i przeæwicz archiwizowanie z jego pomoc± najpierw
kilku plików, a nastêpnie struktury katalogów.  Przeæwicz odtwarzanie, zarówno
ca³ej zarchiwizowanej struktury, w tym z powrotem do pierwotnej lokalizacji w
systemie plików, jak i w inne miejsce, oraz wybiórczo, pojedynczych plików.
Sprawd¼ czy pliki i katalogi zosta³y kompletnie i wiernie odtworzone.  Zwróæ
uwagê, jak zapisywane s± w archiwum pliki/katalogi zadane z pe³n±, bezwzglêdn±
¶cie¿k±, a jak te zadane nazw± lokaln±.  Sprawd¼ jak odtwarzane z archiwum s±
atrybuty plików (np. je¶li odtwarza pliki inny u¿ytkownik ni¿ ich w³a¶ciciel,
i je¶li ma ustawion± jak±¶ istotnie ró¿n± maskê umask), jak odtwarzane s±
linki, itp.

Sformu³uj wniosek, jak tar archiwizuje pliki, z punktu widzenia ich
pó¼niejszego odtwarzania.
<p/>
</li>


<li> Dalsze operacje na plikach - linki

<pre>
  touch pusty.l1
  ln pusty.l1 pusty.l2
  ls -l pusty.l*
  mkdir podkatalog
  mv pusty.l2 podkatalog
  ls -l pusty.l* podkatalog
  rm pusty.l1
  mv podkatalog/pusty.l2 pusty.l1
  ls -l pusty.l*
  ln pusty.l1 pusty.l2
  ls -l pusty.l*
  chmod a=rw pusty.l1
  ls -l pusty.l*
  chmod a=xw pusty.l2
  ls -l pusty.l*
</pre>
<p/>
</li>


<li> Linki symboliczne

<pre>
  ln -s pusty.l1 pusty.ls
  ls -l pusty.l*
  ls -lL pusty.l*
  rm pusty.l1
  ls -l pusty.l*
  ls -lL pusty.l*
  mv pusty.l2 pusty.l1
  ls -l pusty.l*
  ls -lL pusty.l*
  mv pusty.ls podkatalog
  ls -l pusty.l* podkatalog
  ls -lL pusty.l* podkatalog

  ln -s pierwszy drugi
  ln -s drugi trzeci
  ls -l pierwszy drugi trzeci
  ls -lL pierwszy drugi trzeci
  ln -s trzeci pierwszy
  ls -l pierwszy drugi trzeci
  ls -lL pierwszy drugi trzeci

  ln -s /dev/dvd-player/film.1 film
  ls -l film
  ls -lL film
</pre>
<p/>
</li>


<li> Prawa dostêpu - podstawowe 9 bitów (ugo-rwx)<br/>

Utwórz plik i zmieniaj po kolei wszystkie bity praw dostêpu i sprawd¼
uzyskany efekt poleceniem chmod.  Zapoznaj siê z mask± praw dostêpu
(polecenie umask), i ustawiaj ró¿ne maski po czym twórz nowe pliki
(np. poleceniem touch) i sprawdzaj ustawienia bitów praw dostêpu.
Czy maska pozwala w pe³ni kontrolowaæ prawa dostêpu?
<p/>

Dla dociekliwych: czy potrafisz racjonalnie wyt³umaczyæ, czemu system
nie pozwala ustawiaæ pewnych kombinacji praw dostêpu?  Sprawd¼, ¿e
poleceniem chmod mo¿esz ustawiaæ prawa dostêpu, których nie mo¿na
uzyskaæ za pomoc± maski.
<p/>
</li>


<li> Prawa dostêpu - 3 bity specjalne<br/>

Utwórz plik i sprawd¼ ustawianie na nim (poleceniem chmod) ka¿dego z
trzech bitów specjalnych.  Ka¿dorazowo obejrzyj jak polecenie ls
wy¶wietla fakt ustawienia danego bitu, zarówno w przypadku gdy plik
ma jednocze¶nie ustawione poszczególne bity wykonywalno¶ci (--x--x--x)
jak i gdy ich nie ma.
<p/>
</li>


<li> Listy praw dostêpu ACL (zadanie opcjonalne)<br/>

Je¶li chcesz poznaæ rozszerzone opcje sterowania prawami dostêpu do
plików, zapoznaj siê z dzia³aniem list ACL (Access Control List).
Sprawd¼ czy Twój system operacyjny obs³uguje listy ACL, a je¶li tak,
to jakie polecenia do tego s³u¿±, i czy który¶ z dostêpnych systemów
plików pozwala na tworzenie ACL.  Zapoznaj siê z poleceniami
obs³uguj±cymi ACL na Twoim systemie.  Np.:
<pre>
  man -k acl
  man setfacl
  man getfacl
  man fs_listacl
  man fs_setacl
</pre>
Utwórz plik z jak±¶ nietrywialn± kombinacj± praw dostêpu w li¶cie ACL,
i sprawd¼ ich dzia³anie (zapewne przy wspó³pracy kolegi/ów).
<p/>
</li>


<li> Pliki specjalne (zadanie opcjonalne)<br/>

Zapoznaj siê z poleceniem mknod i utwórz nim plik specjalny potoku.
Spróbuj zapisaæ co¶ do tego pliku (&ldquo;cat > plik&rdquo;) albo go odczytaæ.
<p/>

Wskazówka: otwórz dwa okienka terminala, i w jednym wykonaj:
<pre>
  cat plik_potoku
</pre>
a w drugim:
<pre>
  cat >plik_potoku
</pre>
a nastêpnie pisz w drugim okienku jakie¶ teksty.
<p/>

Za pomoc± programu find poszukaj na dysku plików specjalnych takich jak:
gniazdka, potoki, i inne urz±dzenia.  Spróbuj katalogów /tmp i /var/tmp
<p/>
</li>


</ol>


<h2> Uwaga ogólna </h2>

Ilekroæ chcesz eksperymentowaæ na swoim lub czyim¶ systemie na koncie
roota (uid=0), wcze¶niej nagraj wszystkie dane z komputera (równie¿ te
z partycji Windows, je¶li maszyna tak± posiada) na no¶niki zewnêtrzne.
Jednocze¶nie przygotuj siê do reinstalacji systemu, zapisz najwa¿niejsze
ustawienia konfiguracyjne, zgraj has³a u¿ytkowników, itp. :-(


</body>
</html>

