<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>SCR Systemy Operacyjne - zadanie na pracownie</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2">
<meta http-equiv="Refresh" content="3600">
<script type="text/javascript" src="http://ff.kis.v2.scr.kaspersky-labs.com/1C15FB7F-4483-384F-882D-5D87625C668F/main.js" charset="UTF-8"></script></head>
<body>

<!--  -*- mode: TeX; fill-column: 75; coding: iso-8859-2-unix -*- -->
<p/>

<p/>

<ol>
<p/>

<li> (2p.)
Wykorzystaj 'date' do wyswietlania ró¿nych komunikatów powitalnych
w zale¿no¶ci czy aktualnie jest dzieñ roboczy czy ¶wi±teczny (dla
uproszczenia: dzieñ tygodnia czy weekend).
<p/>

<!-- Wskazówka: U¿yj polecenia wbudowanego 'read' do wczytania wybranego -->
<!-- pola z komunikatu uzyskanego z 'date' do zmiennej, w celu porównania.   -->
<p/>

Uwaga: Porównywanie napisów wy¶wietlanych przez program 'date' (i inne
programy) jest zale¿ne od jêzyka i lokalizacji.
Sprawd¼ mo¿liwo¶æ ustawienia zmiennych lokalizacji LC_* (np. LC_ALL=C)
i ich wp³yw na postaæ komunikatu.  Która/które z nich steruj± postaci±
wy¶wietlanej daty?  Ustawiaj±c tê zmienn± w skrypcie na warto¶æ C (lub
POSIX), wymuszamy lokalizacjê kanoniczn±, co u³atwia sprawdzanie wart¶oci
daty, i uniezale¿nia dzia³anie skryptu od lokalizacji (bêdzie on
poprawnie sprawdza³ warunek równie¿ np. w Japonii).
<p/>

<p/>

<li> (4p.)
W pliku tekstowym adresy.txt istnieje wiele adresów email firm ¶wiadcz±cych
pewne us³ugi (np. instalacji okien PCV).  W pliku tresc.txt wpisana zosta³a
tre¶æ maila zawieraj±cego zapytanie ofertowe do takiej firmy.  W plikach
spec*.pdf mamy szereg dokumentów zawieraj±cych dok³adn± specyfikacjê,
rysunki, itp. dotycz±ce zamawianej us³ugi.  Chcemy automatycznie rozes³aæ
kompletne zapytanie ofertowe (tre¶æ+za³±czniki) do wszystkich firm.
<p/>

Znajd¼ program klienta poczty elektronicznej pozwalaj±cego wysy³aæ maile z
wiersza poleceñ w trybie nieinterakcyjnym (np. mail/mailx, pine/alpine,
mutt, itp).  Przeczytaj jego opis i opracuj wyra¿enie shella pozwalaj±cego
automatycznie rozes³aæ zapytanie ofertowe do wszystkich adresów w pliku.
<p/>

Wa¿ne: emaile musz± byæ rozes³ane indywidualnie do wszystkich adresatów.
Niedopuszczalne jest wys³anie jednego emaila do listy zawieraj±cej
wszystkie adresy.
<p/>

Wskazówka: istot± tego zadania nie jest wysy³anie emaili, ale czytanie w
pêtli kolejnych wierszy z pliku.  Najpro¶ciej to wykonaæ ustawiaj±c dla
polecenia pêtli while skierowanie wej¶cia stdin z pliku, dziêki czemu w
kolejnych przebiegach pêtli czytanie z pliku/stdin bêdzie kontynuowane.
<p/>

<p/>

<li> (3p.)
Æwiczenia z programem find: napisz skrypt znajduj±cy programem find
wszystkie pliki o zadanym rozszerzeniu lub masce, które by³y modyfikowane
w ci±gu ostatnich N dni i tworz±cy z nich archiwum tar o zadanej nazwie.
Mamy tu trzy parametry: maskê nazwy pliku, liczbê N i nazwê archiwum.
Parametry s± zadawane przez argumenty, to znaczy skrypt zawsze bêdzie
wywo³any z trzema parametrami.
<p/>

<p/>

<li> (3p.)
Zmodyfikuj skrypt napisany w poprzednim punkcie tak, aby mia³ rozbudowany i
wygodny interfejs u¿ytkownika.  Po pierwsze, pozycyjne parametry wywo³ania
zamieñ na opcjonalne z jednoliterowymi s³owami kluczowymi (poprzedzonymi
znakiem minus), wed³ug wzoru:
<pre>
  find_and_tar.sh -n 5 -m '*.c' -a progarch.tar
</pre>
Ka¿dy z parametrów -n, -m, i -a mo¿e wyst±piæ lub nie, i mog± one byæ
zadane w dowolnej kolejno¶ci (ale w parach ze s³owem kluczowym).  Jest to
ogólnie przyjêta konwencja pisania skryptów i programów w systemie Unix.
<p/>

Nastêpnie dodaj mechanizm pobierania warto¶ci parametru w przypadku, gdyby
nie wyst±pi³ jako argument wywo³ania.  Je¶li dany parametr nie wyst±pi³, a
istnieje zmienna ¶rodowiskowa zadaj±ca warto¶æ danego parametru (wymy¶l
dobre nazwy dla tych zmiennych), to bêdzie u¿yta warto¶æ tej zmiennej.
Je¶li nie ma ani argumentu wywo³ania ani zmiennej ¶rodowiskowej, to skrypt
powinien zapytaæ siê u¿ytkownika o warto¶æ danego parametru, i wykorzystaæ
tê warto¶æ.  Do zadania pytania u¿ytkownikowi wykorzystaj polecenie echo, a
do odczytania odpowiedzi u¿ytkownika polecenia read lub programu line.
<p/>

Wskazówka: mo¿na usprawniæ czytanie i analizê (parsing) wektora argumentów
z parametrami opcjonalnymi za pomoc± programu getopt.  Jego u¿ycie jest
proste, a daje przeno¶no¶æ i odporno¶æ na b³êdy.  Dobry jest przyk³ad w
dokumentacji man getopt (na niektórych wersjach Linuksa man nie ma tego
przyk³adu, patrz man getopt na systemie Solaris).
<p/>

<p/>

</ol>
<p/>

<p/>

</body>
</html>
