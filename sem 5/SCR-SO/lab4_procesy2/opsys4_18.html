<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>SCR Systemy Operacyjne - zadanie na pracownie</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2">
<meta http-equiv="Refresh" content="3600">
<script type="text/javascript" src="http://ff.kis.v2.scr.kaspersky-labs.com/1C15FB7F-4483-384F-882D-5D87625C668F/main.js" charset="UTF-8"></script></head>
<body>

<!--  -*- mode: TeX; fill-column: 75; coding: iso-8859-2-unix -*- -->
<p/>

<p/>

<ol>
<p/>

<p/>

<li> (4p.)
Napisz program wykonuj±cy jak±¶ trywialn± operacjê (np. <tt>++i;</tt>) w
nieskoñczonej pêtli.  Skompiluj i uruchom program, a nastêpnie programem
<tt>top</tt> sprawd¼, czy Twój program pokazuje siê w czo³ówce programów
wykorzystuj±cych cykle obliczeniowe komputera.  Przed przej¶ciem do
dalszych prac zabij program klawiszem <tt>Ctrl-C</tt>.  Dodaj w pêtli
opó¼nienie (<tt>sleep(1);</tt>, a najlepiej <tt>nanosleep();</tt> z opó¼nieniem
np. 100 milisekund) i upewnij siê, ¿e po uruchomieniu tego programu nie
pojawia siê on ju¿ na szczycie listy top.
<p/>

Nastêpnie sprawd¼ wysy³anie programowi ró¿nych sygna³ów poleceniem
<tt>kill</tt>.  Dodaj w programie przechwytywanie sygna³u/ów, i wykorzystuj±c
sygna³y: <tt>SIGALRM</tt>, <tt>SIGTERM</tt>, <tt>SIGUSR1</tt>, <tt>SIGUSR2</tt>
wypróbuj nastêpuj±ce reakcje na sygna³: (a) wy¶wietlenie komunikatu i
zakoñczenie pracy programu, (b) wy¶wietlenie komunikatu i powrót do
wykonywania programu, (c) wstrzymywanie odebrania sygna³u (np. na 1000
iteracji w pêtli), i nastêpnie wznowienie odebrania sygna³u, i (d)
ca³kowite ignorowanie sygna³u.  W raporcie wklej instrukcje programu
deklaruj±ce poszczególne reakcje na sygna³, i podsumuj uzyskane wyniki.
<p/>

<li> (4p.)
Zapoznaj siê z narzêdziami umo¿liwiaj±cymi odczyt pseudosystemu plików
proc (man proc).  W systemie Solaris pliki w tym systemie maj±
specyficzny format, i do ich odczytu i dekodowania tre¶ci s³u¿y
odpowiedni zestaw programów.  W systemie Linux pliki w <tt>/proc</tt>
maja formaty tekstowe i mo¿na je odczytywaæ (a w konkretnych
przypadkach równie¿ zapisywaæ) zwyk³ymi narzêdziami do operacji na
plikach tekstowych, jak: <tt>cat</tt>, <tt>grep</tt>, itp.
<p/>

  <ul>
  <li>
  Uruchom program/skrypt przechwytuj±cy oraz ignoruj±cy wybrane sygna³y.
  Nastêpnie sprawd¼ tablicê akcji przypisanych poszczególnym sygna³om.
<!-- Solaris: psig <i></i> -->
<!-- Linux: grep ^Sig /proc/<i></i>/status -->
  <li>
  Stwórz potok trzech poleceñ, tak aby pierwszy program w nieskoñczonej pêtli
  wypisywa³ jaki¶ tekst.  Za pomoc± odpowiedniego programu zbadaj otwarte pliki
  ka¿dego z procesów uczestnicz±cych w potoku.  Czy wy³±cznie na podstawie
  uzyskanych w ten sposób informacji mo¿na odtworzyæ kolejno¶æ wystêpowania
  poleceñ w potoku?  Je¶li tak to w jaki sposób?
<!-- Solaris: pfiles &lt;pid&gt; -->
<!-- Nale¿y przebadaæ ka¿dy proces uczestnicz±cy w potoku, a dok³adniej -->
<!-- zwróciæ uwagê na warto¶æ atrybutu 'ino' dla plików oznaczonych -->
<!-- deskryptorem 0 oraz 1. -->
  </ul>
<p/>

<p/>

<li> (6p.)
Zapoznaj siê z programem truss (Solaris: man truss), w szczególno¶ci z
prze³±cznikami takimi jak: -r, -s, -t, -u, -w.  Naucz siê filtrowaæ
informacje dostarczane przez truss za pomoc± powy¿szych prze³±czników.
  <ul>
  <li>
  Za pomoc± programu truss przeanalizuj wykonanie prostego programu
  wypisuj±cego na ekran jaki¶ tekst.  Program powinien byæ napisany w jêzyku C.
<!-- INFO: tutaj nale¿y pozwoliæ poeksperymentowaæ z programem truss. -->
  <li>
  Za pomoc± programu truss zidentyfikuj oraz zlokalizuj wszystkie pliki
  konfiguracyjne, które pow³oka bash próbuje odczytaæ przy starcie.
<!-- INFO: student musi w taki sposób uruchomiæ program truss, aby ten -->
<!-- pokazywa³ jedynie wywo³ania funkcji open. -->
  <li>
  Za pomoc± programu truss zlicz ilo¶æ wywo³añ funkcji printf, które
  wykonuje program ls, uruchomiony w Twoim katalogu.
<!-- INFO: nale¿y wy¶wietliæ przy pomocy prze³±cznika -u, tylko -->
<!-- wywo³ania funkcji printf z biblioteki libc, a nastêpnie -->
<!-- odpowiednio przetworzyæ wyj¶cie/'plik wynikowy' programu truss -->
<!-- przy pomocy programu wc i innych. -->
  <li>
  Za pomoc± programu truss prze¶led¼ w jaki sposób edytor tekstu (np. pico)
  postêpuje z edytowanym plikiem?  Czy plik ten jest otwarty przez ca³y czas
  dzia³ania edytora?
<!-- INFO: podobne zadanie do poprzedniego, z tym wyj±tkiem ¿e nale¿y -->
<!-- tak¿e ¶ledziæ wywo³ania funkcji close.  Ponadto nale¿y pod³±czyæ siê -->
<!-- programem truss do ju¿ dzia³aj±cego procesu.  Wniosek powinien byæ -->
<!-- taki, ¿e program otwiera plik tylko w momencie próby zapisu/odczytu. -->
<!-- Przez ca³y czas edytowania plik nie jest otwarty.  To mo¿e byæ dobra -->
<!-- lekcja dla przysz³ych programistów, aby zamykali te pliki z których -->
<!-- w danej chwili nie korzystaj±:) -->
<!--   <li> -->
<!--   Sprawd¼ ¶ci±ganie dokumentów HTML z serwera WWW poleceniem <tt>wget</tt>. -->
<!--   Na przyk³ad: <tt>wget -P /tmp URL</tt> gdzie w miejsce URL wpisany -->
<!--   bêdzie URL jakiego¶ dokumentu (np. opisu tego zadania).<br/> -->
<!--   Za pomoc± programu <tt>truss</tt> okre¶l z jakich bibliotek program -->
<!--   <tt>wget</tt> wywo³uje funkcje.  Czy na podstawie uzyskanych -->
<!--   informacji mo¿esz okre¶liæ jaka funkcja dokonuje translacji adresu -->
<!--   sumbolicznego z ULR na numeryczny adres IP? -->
<!--   %%INFO: Tutaj tak¿e nale¿y wykorzystaæ odpowiednie prze³±czniki -->
<!--   %%programu truss.  Student powinien wy¶wietlaæ za jego pomoc± -->
<!--   %%jedynie wywo³ania funkcji pochodz±cych z bibliotek (nale¿y -->
<!--   %%wy³±czyæ wy¶wietlanie pozosta³ych rzeczy za pomoc± warto¶ci !all -->
<!--   %%dla odpowiednich prze³±czników, np. -t\!all).  Program ten do -->
<!--   %%translacji adresów wykorzystuje funkcjê gethostbyname z biblioteki libnsl. -->
  </ul>
<p/>

<p/>

<li> (2p.)
Zapoznaj siê z narzêdziem <tt>strace</tt> na Linuksie, i aby je wypróbowaæ
wykonaj z jego u¿yciem kilka æwiczeñ podobnych do æwiczeñ z programem
truss.  Podaj przyk³adowe wywo³ania <tt>strace</tt>.
<p/>

Uwaga: nie myliæ z programem <tt>strace</tt> na Solarisie, który jest
zupe³nie innym programem.  Linuksowy <tt>strace</tt> odpowiada Solarisowemu
<tt>truss</tt>.
<p/>

<p/>

</ol>
<p/>

<p/>

</body>
</html>
