<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>SCR Systemy Operacyjne - zadanie na pracownie</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2">
<meta http-equiv="Refresh" content="3600">
<script type="text/javascript" src="http://ff.kis.v2.scr.kaspersky-labs.com/1C15FB7F-4483-384F-882D-5D87625C668F/main.js" charset="UTF-8"></script></head>
<body>

<!--  -*- mode: TeX; fill-column: 75; coding: iso-8859-2-unix -*- -->
<p/>

<p/>

(10 punktów)  Napisz program, który najpierw:
<p/>

<ol>
<li> utworzy potok (funkcj± <tt>pipe</tt>),
<li> uruchomi podproces, z którym proces nadrzêdny bêdzie komunikowa³
      siê przez ten potok (funkcja <tt>fork</tt>),
<li> proces nadrzêdny odpyta u¿ytkownika o nazwê pliku z obrazkiem
      (JPEG lub PNG), a nastêpnie wy¶le procesowi potomnemu zawarto¶æ
      tego pliku przez potok,
<li> proces potomny wykona przekierowanie strumienia stdin na potok
      (funkcje <tt>close</tt> i <tt>dup</tt>), a nastêpnie uruchomi
      program (jedna z funkcji <tt>exec*</tt>) wy¶wietlaj±cy obrazek
      pobrany z wej¶cia (deskryptora 0).
<p/>

      Jako program wy¶wietlaj±cy obrazki mo¿na zastosowaæ program
      <tt>display</tt> nale¿±cy do pakietu Image Magick.  Przydatnym
      programem wy¶wietlaj±cym obrazki jest równie¿ <tt>xv</tt>, lecz
      jego licencja zezwala na jego u¿ycie tylko do celów prywatnych.
</ol>
<p/>

Uruchom program, sprawd¼, czy proces potomny zacznie wy¶wielaæ obrazek
od razu, czy dopiero po zamkniêciu potoku przez proces nadrzêdny.
<p/>

(10p.)
W drugiej czê¶ci zadania zmodyfikuj program w taki sposób, by wykorzystuj±c
potok nazwany (FIFO) by³ w stanie wysy³aæ do tego potoku zawarto¶æ wielu
kolejnych plików, których nazwy poda u¿ytkownik.  Poniewa¿ potoki FIFO
istniej± jako pliki na dysku, i ka¿dy program mo¿e je dowolnie otwieraæ,
nie ma tu ju¿ potrzeby uruchamiania procesu czytaj±cego przez klonowanie
i przekierowywania deskryptorów.  Program czytaj±cy mo¿e byæ uruchomiony
ca³kowicie niezale¿nie.
<p/>

Jednak popularne programy do wy¶wietlania obrazków nie obs³uguj± plików FIFO
w sposób zgodny z wymaganiami tego zadania.  Dlatego w drugiej czê¶ci
zadania zamiast obrazków przesy³ane bêd± zwyk³e pliki tekstowe, a do ich
wy¶wietlania najlepiej wykorzystaæ program tail z argumentem +1cf (flaga -f
powoduje, ¿e pomimo zamkniêcia pliku albo potoku przez program zapisuj±cy,
program tail czeka na dalsze dane).
<p/>

</body>
</html>
